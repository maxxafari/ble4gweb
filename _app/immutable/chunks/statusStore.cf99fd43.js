import{w as a}from"./index.b9f67257.js";import{f as c}from"./scheduler.da9d0849.js";const s="status",o=a({key:s,gps:{lat:0,lng:0,alt:0,accuracy:-1},compass:null,phoneBattery:-1,phoneConnection:{effectiveType:"",rtt:-1,downlink:-1},bleBattery:-1,bleConnected:!1,bleSignal:-1});let n;const l=t=>{clearTimeout(n),n=setTimeout(()=>{t()},500)},u=t=>{o.update(e=>({...e,...t}))},i=t=>!!(typeof t=="object"&&t&&"key"in t&&t.key===s),p=t=>{console.log("bindStatusStoreToConnDownStream"),t.on("data",e=>{i(e)&&u(e)})},m=t=>{console.log("bindStatusStoreToConnUpStream"),o.subscribe(r=>{l(()=>{t.send(r)})});const e=c(o);t.send(e)};export{p as a,m as b,o as s,u};
