async function l(){const s=await fetch("https://maxxafari.metered.live/api/v1/turn/credentials?apiKey=3aea09a742976f93e50ffe3a1c7a287fc050");return console.info("Got iceServers"),await s.json()}const t="https://connect.inboxgo.org/inbox",r={username:"web-ble-control-caller",pass:"not-a-secret-at-all"},o={username:"web-ble-control-responder",pass:"not-a-secret-at-all-also"};async function c(s,a){const n=await fetch(`${t}/inbox`,{method:"GET",cache:"no-cache",headers:new Headers({Authorization:"Basic "+window.btoa(s+":"+a)})});try{const e=await n.json();return console.info("Received message from signal server:",e),e}catch{throw new Error("Failed to receive message from signal server")}}async function i(s,a,n,e){await fetch(`${t}/inbox?to=${n}`,{method:"POST",cache:"no-cache",headers:new Headers({Authorization:"Basic "+window.btoa(s+":"+a)}),body:JSON.stringify(e)}),console.info("Sent message to signal server:",e)}async function m(s){return new Promise((a,n)=>{c(r.username,r.pass).then(e=>{console.info("Received message from signal server:",e),a(e)}).catch(e=>{n(e)}),i(r.username,r.pass,o.username,s)})}const f=async()=>await c(o.username,o.pass),h=async s=>{i(o.username,o.pass,r.username,s)};export{h as A,m as C,f as W,l as g};
