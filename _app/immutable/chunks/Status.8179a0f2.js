import{f as gt,s as he,n as pe,r as pt,c as Ke,o as vt,b as Le,i as Ge,j as Qe}from"./scheduler.396ab924.js";import{S as be,i as me,s as B,g,m as z,c as N,h as p,j as h,n as F,f as u,z as ce,k as f,l as oe,F as I,a as j,A as n,C as Ze,o as W,G as $e,r as qe,u as je,v as ze,d as Fe,t as Xe,w as Ye}from"./index.2cee157a.js";import{w as rt}from"./index.7cfe3c3c.js";import{s as ie,u as ht}from"./statusStore.c6a4319c.js";const bt=e=>{let t,s=!1;return{isConnected:()=>s,connect:async()=>{var P;if(t=await navigator.bluetooth.requestDevice({filters:[{namePrefix:"nrf52"}],optionalServices:e.map(S=>S.serviceId)}),!t.gatt)throw new Error("No GATT server");const i=await((P=t.gatt)==null?void 0:P.connect());if(!i)throw new Error("No connect to GATT server");return await e.forEach(async S=>await S.addServiceTo(i)),s=!0,t.addEventListener("gattserverdisconnected",S=>{console.error("disconnected BLE",S),s=!1}),!0},disconnect:async()=>{var i;await((i=t==null?void 0:t.gatt)==null?void 0:i.disconnect())},bleDevice:t}},lt=e=>{const{name:t,serviceId:s,characteristicId:l,readParser:o,setParser:d}=e;let r,i;const P=async w=>{if(i=w,!i.connected)throw new Error("BLE Server not connected");return r=await(await i.getPrimaryService(s)).getCharacteristic(l),e.isNotifiable&&(await r.startNotifications(),r.addEventListener("characteristicvaluechanged",G=>{const O=G.target;if(!o)throw new Error("readParser not defined");O.value&&y(o(O.value))})),!0};async function S(){if(!o)throw new Error("readParser not defined");return i!=null&&i.connected?await o(await r.readValue()):(console.warn("setVal, no connection",{name:t}),o(new DataView(new ArrayBuffer(0))))}async function m(w){await r.writeValue(w)}async function _(w){if(!d)throw new Error("setParser not defined");if(!(i!=null&&i.connected))return console.error(`${t} setVal, no connection`);const k=d(w);console.log("setVal",{value:w,parsedValue:k}),await r.writeValue(k)}let y=w=>{console.warn("onNotification not implemented:",{name:t,value:w})};return{addServiceTo:P,serviceId:s,getVal:S,setVal:_,setValRaw:m,onNotification:w=>{if(!e.isNotifiable)throw new Error(`${t} Characteristic is not set as notifiable`);y=w}}},ot=lt({name:"Battery",serviceId:"battery_service",characteristicId:"battery_level",isNotifiable:!0,readParser:e=>e.getUint8(0).toString()}),it=lt({name:"Leds",serviceId:"a3941db0-a97c-4cf1-943f-a25ff9ba40cd",characteristicId:"5b8c0ab6-a058-4684-b2b6-4a0a692e2d45",isNotifiable:!1,readParser:e=>(console.log("dataView leds",e),e.getInt8(0)+""+e.getInt8(1)),setParser:e=>{if(typeof e=="string"){const[t,s]=e.split("").map(l=>parseInt(l));return new Uint8Array([t,s])}else return console.log("unhandled data setParser",e),new Uint8Array([0,0])}}),mt=bt([it,ot]),_t={...mt,leds:it,battery:ot},ct="stear",ve=rt({key:ct,lm:0,rm:0}),yt=e=>!!(typeof e=="object"&&e&&"key"in e&&e.key===ct),ut=e=>{ve.update(t=>({...t,...e}))},Lt=e=>{console.log("bindStearingStoreToConnDownStream"),e.on("data",t=>{yt(t)&&ut(t)})},Gt=e=>{console.log("bindStearingStoreToConnDownStream"),ve.subscribe(s=>{e.send(s)});const t=gt(ve);e.send(t)},dt="btn",ue=rt({key:dt,horn:!1,lights:!1,speedMode:!1,maxSpeed:15});let xe;const ft=e=>{clearTimeout(xe),xe=setTimeout(()=>{e()},100)},St=e=>{ue.update(t=>({...t,...e}))},wt=e=>!!(typeof e=="object"&&e&&"key"in e&&e.key===dt),$t=e=>{console.log("bindStatusStoreToConnDownStream"),e.on("data",t=>{wt(t)&&St(t)})},qt=e=>{console.log("bindStatusStoreToConnUpStream"),ue.subscribe(t=>{ft(()=>{e.send(t)})})},et=(e,t)=>{console.log("btnPress!"),ft(()=>{ue.update(s=>({...s,[e]:!s[e]})),t||setTimeout(()=>{ue.update(s=>({...s,[e]:!1}))},100)})};function tt(e){let t,s="Gamepad connected",l,o,d,r=e[3].ly+"",i,P,S,m=e[3].rx+"",_;return{c(){t=g("span"),t.textContent=s,l=B(),o=g("div"),d=g("div"),i=z(r),P=B(),S=g("div"),_=z(m),this.h()},l(y){t=p(y,"SPAN",{"data-svelte-h":!0}),ce(t)!=="svelte-vjytum"&&(t.textContent=s),l=N(y),o=p(y,"DIV",{class:!0});var T=h(o);d=p(T,"DIV",{class:!0});var w=h(d);i=F(w,r),w.forEach(u),P=N(T),S=p(T,"DIV",{class:!0});var k=h(S);_=F(k,m),k.forEach(u),T.forEach(u),this.h()},h(){f(d,"class","svelte-1gg25p3"),f(S,"class","svelte-1gg25p3"),f(o,"class","vals svelte-1gg25p3")},m(y,T){j(y,t,T),j(y,l,T),j(y,o,T),n(o,d),n(d,i),n(o,P),n(o,S),n(S,_)},p(y,T){T&8&&r!==(r=y[3].ly+"")&&W(i,r),T&8&&m!==(m=y[3].rx+"")&&W(_,m)},d(y){y&&(u(t),u(l),u(o))}}}function Et(e){let t,s,l,o,d,r,i,P,S,m,_,y,T="x:",w,k,G,O,D,a,V,A,c,b,M,L,U,q,X,_e,K,ye,R,Se,H,we,J,Ee,Q,Te,Z,Ce,x,Ie,ee,Be,te,Ne,se,Pe,ne,ke,ae,De,re,de,Ve,le,fe,Me,Re,$=e[4]&&tt(e);return{c(){$&&$.c(),t=B(),s=g("div"),l=g("div"),o=z("ls:"),d=z(e[0]),r=B(),i=g("div"),P=z("rs:"),S=z(e[1]),m=B(),_=g("div"),y=g("div"),y.textContent=T,w=B(),k=g("div"),G=z("extraMaxSpeed:"),O=z(e[5]),D=B(),a=g("section"),V=g("div"),A=B(),c=g("div"),b=g("div"),M=B(),L=g("div"),U=g("div"),q=B(),X=g("button"),_e=B(),K=g("button"),ye=B(),R=g("button"),Se=B(),H=g("button"),we=B(),J=g("button"),Ee=B(),Q=g("button"),Te=B(),Z=g("button"),Ce=B(),x=g("button"),Ie=B(),ee=g("button"),Be=B(),te=g("button"),Ne=B(),se=g("button"),Pe=B(),ne=g("button"),ke=B(),ae=g("button"),De=B(),re=g("button"),Ve=B(),le=g("button"),this.h()},l(v){$&&$.l(v),t=N(v),s=p(v,"DIV",{class:!0});var E=h(s);l=p(E,"DIV",{class:!0});var Ue=h(l);o=F(Ue,"ls:"),d=F(Ue,e[0]),Ue.forEach(u),r=N(E),i=p(E,"DIV",{class:!0});var Oe=h(i);P=F(Oe,"rs:"),S=F(Oe,e[1]),Oe.forEach(u),E.forEach(u),m=N(v),_=p(v,"DIV",{class:!0});var ge=h(_);y=p(ge,"DIV",{class:!0,"data-svelte-h":!0}),ce(y)!=="svelte-1ibhipi"&&(y.textContent=T),w=N(ge),k=p(ge,"DIV",{class:!0});var Ae=h(k);G=F(Ae,"extraMaxSpeed:"),O=F(Ae,e[5]),Ae.forEach(u),ge.forEach(u),D=N(v),a=p(v,"SECTION",{class:!0});var C=h(a);V=p(C,"DIV",{class:!0}),h(V).forEach(u),A=N(C),c=p(C,"DIV",{class:!0});var He=h(c);b=p(He,"DIV",{class:!0,style:!0}),h(b).forEach(u),He.forEach(u),M=N(C),L=p(C,"DIV",{class:!0});var Je=h(L);U=p(Je,"DIV",{class:!0,style:!0}),h(U).forEach(u),Je.forEach(u),q=N(C),X=p(C,"BUTTON",{class:!0}),h(X).forEach(u),_e=N(C),K=p(C,"BUTTON",{class:!0}),h(K).forEach(u),ye=N(C),R=p(C,"BUTTON",{class:!0}),h(R).forEach(u),Se=N(C),H=p(C,"BUTTON",{class:!0}),h(H).forEach(u),we=N(C),J=p(C,"BUTTON",{class:!0}),h(J).forEach(u),Ee=N(C),Q=p(C,"BUTTON",{class:!0}),h(Q).forEach(u),Te=N(C),Z=p(C,"BUTTON",{class:!0}),h(Z).forEach(u),Ce=N(C),x=p(C,"BUTTON",{class:!0}),h(x).forEach(u),Ie=N(C),ee=p(C,"BUTTON",{class:!0}),h(ee).forEach(u),Be=N(C),te=p(C,"BUTTON",{class:!0}),h(te).forEach(u),Ne=N(C),se=p(C,"BUTTON",{class:!0}),h(se).forEach(u),Pe=N(C),ne=p(C,"BUTTON",{class:!0}),h(ne).forEach(u),ke=N(C),ae=p(C,"BUTTON",{class:!0}),h(ae).forEach(u),De=N(C),re=p(C,"BUTTON",{class:!0,style:!0}),h(re).forEach(u),Ve=N(C),le=p(C,"BUTTON",{class:!0,style:!0}),h(le).forEach(u),C.forEach(u),this.h()},h(){f(l,"class","svelte-1gg25p3"),f(i,"class","svelte-1gg25p3"),f(s,"class","vals svelte-1gg25p3"),f(y,"class","svelte-1gg25p3"),f(k,"class","svelte-1gg25p3"),f(_,"class","vals svelte-1gg25p3"),f(V,"class","pad svelte-1gg25p3"),f(b,"class","stick svelte-1gg25p3"),oe(b,"transform",e[8]()),I(b,"click",e[2].lstick),f(c,"class","well left svelte-1gg25p3"),f(U,"class","stick svelte-1gg25p3"),oe(U,"transform",e[7]()),I(U,"click",e[2].rstick),f(L,"class","well right svelte-1gg25p3"),f(X,"class","button a svelte-1gg25p3"),I(X,"on",e[2].a),f(K,"class","button b svelte-1gg25p3"),I(K,"on",e[2].b),f(R,"class","button x svelte-1gg25p3"),I(R,"on",e[2].x),f(H,"class","button y svelte-1gg25p3"),I(H,"on",e[2].y),f(J,"class","button map svelte-1gg25p3"),I(J,"on",e[2].map),f(Q,"class","button menu svelte-1gg25p3"),I(Q,"on",e[2].menu),f(Z,"class","button xbox svelte-1gg25p3"),I(Z,"on",e[2].xbox),f(x,"class","dpad du svelte-1gg25p3"),I(x,"on",e[2].du),f(ee,"class","dpad dr svelte-1gg25p3"),I(ee,"on",e[2].dr),f(te,"class","dpad dd svelte-1gg25p3"),I(te,"on",e[2].dd),f(se,"class","dpad dl svelte-1gg25p3"),I(se,"on",e[2].dl),f(ne,"class","bumper left svelte-1gg25p3"),I(ne,"on",e[2].lb),f(ae,"class","bumper right svelte-1gg25p3"),I(ae,"on",e[2].rb),f(re,"class","trigger left svelte-1gg25p3"),f(re,"style",de=e[6]("lt")),f(le,"class","trigger right svelte-1gg25p3"),f(le,"style",fe=e[6]("rt")),f(a,"class","controller svelte-1gg25p3"),I(a,"connected",e[4])},m(v,E){$&&$.m(v,E),j(v,t,E),j(v,s,E),n(s,l),n(l,o),n(l,d),n(s,r),n(s,i),n(i,P),n(i,S),j(v,m,E),j(v,_,E),n(_,y),n(_,w),n(_,k),n(k,G),n(k,O),j(v,D,E),j(v,a,E),n(a,V),n(a,A),n(a,c),n(c,b),n(a,M),n(a,L),n(L,U),n(a,q),n(a,X),n(a,_e),n(a,K),n(a,ye),n(a,R),n(a,Se),n(a,H),n(a,we),n(a,J),n(a,Ee),n(a,Q),n(a,Te),n(a,Z),n(a,Ce),n(a,x),n(a,Ie),n(a,ee),n(a,Be),n(a,te),n(a,Ne),n(a,se),n(a,Pe),n(a,ne),n(a,ke),n(a,ae),n(a,De),n(a,re),n(a,Ve),n(a,le),Me||(Re=[Ze(window,"gamepadconnected",e[9]),Ze(window,"gamepaddisconnected",e[10])],Me=!0)},p(v,[E]){v[4]?$?$.p(v,E):($=tt(v),$.c(),$.m(t.parentNode,t)):$&&($.d(1),$=null),E&1&&W(d,v[0]),E&2&&W(S,v[1]),E&32&&W(O,v[5]),E&256&&oe(b,"transform",v[8]()),E&4&&I(b,"click",v[2].lstick),E&128&&oe(U,"transform",v[7]()),E&4&&I(U,"click",v[2].rstick),E&4&&I(X,"on",v[2].a),E&4&&I(K,"on",v[2].b),E&4&&I(R,"on",v[2].x),E&4&&I(H,"on",v[2].y),E&4&&I(J,"on",v[2].map),E&4&&I(Q,"on",v[2].menu),E&4&&I(Z,"on",v[2].xbox),E&4&&I(x,"on",v[2].du),E&4&&I(ee,"on",v[2].dr),E&4&&I(te,"on",v[2].dd),E&4&&I(se,"on",v[2].dl),E&4&&I(ne,"on",v[2].lb),E&4&&I(ae,"on",v[2].rb),E&64&&de!==(de=v[6]("lt"))&&f(re,"style",de),E&64&&fe!==(fe=v[6]("rt"))&&f(le,"style",fe),E&16&&I(a,"connected",v[4])},i:pe,o:pe,d(v){v&&(u(t),u(s),u(m),u(_),u(D),u(a)),$&&$.d(v),Me=!1,pt(Re)}}}const We=.05,Tt=254;function st(e){return e<We&&e>-We}function nt(e){return Math.tan(e)/(Math.PI/2)}function Ct(e,t,s){let l,o,d,r;Ke(e,ue,c=>s(12,r=c));let i=0,P=!1,S=r.maxSpeed,{ls:m=0}=t,{rs:_=0}=t,y=0;function T(){const c=S+y,b=c*We*Math.PI;return Math.floor(c+b)}function w(c){return st(c)?0:Math.floor(nt(c)*T())}function k(c,b){if(st(c))return 0;const M=Tt-S;return Math.floor(nt(c)*M)}const G={y:()=>{et("horn",!1)},x:()=>{et("lights",!0)}},O={a:0,b:0,x:0,y:0,lb:0,rb:0,lt:0,rt:0,map:0,menu:0,lstick:0,rstick:0,du:0,dd:0,dl:0,dr:0,xbox:0},D={lx:0,ly:0,rx:0,ry:0},a=()=>{A(),s(4,P=!0),console.log("GamePad connected")},V=()=>{cancelAnimationFrame(i),s(4,P=!1),console.log("GamePad lost connection")},A=()=>{const c=navigator.getGamepads();if(!c)return;const b=c[0],M=["a","b","x","y","lb","rb","lt","rt","map","menu","lstick","rstick","du","dd","dl","dr","xbox"],L=["lx","ly","rx","ry"];b==null||b.buttons.forEach((U,q)=>{const X=M[q];U.pressed?(s(2,O[M[q]]=U.value,O),G[X]&&G[X](),P||s(4,P=!0)):s(2,O[M[q]]=0,O)}),b==null||b.axes.forEach((U,q)=>{s(3,D[L[q]]=U>.01||U<-.01?parseFloat(U.toFixed(3)):0,D)}),i=requestAnimationFrame(A)};return vt(async()=>{try{A()}catch(c){console.log(c)}}),e.$$set=c=>{"ls"in c&&s(0,m=c.ls),"rs"in c&&s(1,_=c.rs)},e.$$.update=()=>{e.$$.dirty&12&&s(8,l=()=>{let c=D.lx*25,b=D.ly*25,M=D.lx*10,L=D.ly*10,U=1-O.lstick*.05;return s(0,m=w(D.ly)*-1),s(1,_=w(D.lx)),`translateX(${c}%) translateY(${b}%) rotateY(${M}deg) rotateX(${L}deg) scale(${U})`}),e.$$.dirty&12&&s(7,o=()=>{let c=D.rx*25,b=D.ry*25,M=D.rx*10,L=D.ry*10,U=1-O.rstick*.05;return`translateX(${c}%) translateY(${b}%) rotateY(${M}deg) rotateX(${L}deg) scale(${U})`}),e.$$.dirty&5&&s(6,d=c=>{let b=O[c],M=c==="rt"?-b:b;return s(5,y=k(O.lt)),`
			transform: scaleX(${M}) scaleY(${b}) rotate(-69deg);
			opacity: ${.3+b};
		`})},[m,_,O,D,P,y,d,o,l,a,V]}class It extends be{constructor(t){super(),me(this,t,Ct,Et,he,{ls:0,rs:1})}}function Bt(e){let t,s,l,o=e[3].lm+"",d,r,i=e[3].rm+"",P,S,m,_,y,T,w;function k(a){e[4](a)}function G(a){e[5](a)}function O(a){e[6](a)}let D={};return e[0]!==void 0&&(D.ls=e[0]),e[1]!==void 0&&(D.rs=e[1]),e[2]!==void 0&&(D.speedMultiplier=e[2]),m=new It({props:D}),Le.push(()=>$e(m,"ls",k)),Le.push(()=>$e(m,"rs",G)),Le.push(()=>$e(m,"speedMultiplier",O)),{c(){t=g("div"),s=g("div"),l=g("span"),d=z(o),r=g("span"),P=z(i),S=B(),qe(m.$$.fragment),this.h()},l(a){t=p(a,"DIV",{class:!0});var V=h(t);s=p(V,"DIV",{class:!0});var A=h(s);l=p(A,"SPAN",{});var c=h(l);d=F(c,o),c.forEach(u),r=p(A,"SPAN",{});var b=h(r);P=F(b,i),b.forEach(u),A.forEach(u),S=N(V),je(m.$$.fragment,V),V.forEach(u),this.h()},h(){f(s,"class","filtered svelte-iezy4t"),f(t,"class","wrap svelte-iezy4t")},m(a,V){j(a,t,V),n(t,s),n(s,l),n(l,d),n(s,r),n(r,P),n(t,S),ze(m,t,null),w=!0},p(a,[V]){(!w||V&8)&&o!==(o=a[3].lm+"")&&W(d,o),(!w||V&8)&&i!==(i=a[3].rm+"")&&W(P,i);const A={};!_&&V&1&&(_=!0,A.ls=a[0],Ge(()=>_=!1)),!y&&V&2&&(y=!0,A.rs=a[1],Ge(()=>y=!1)),!T&&V&4&&(T=!0,A.speedMultiplier=a[2],Ge(()=>T=!1)),m.$set(A)},i(a){w||(Fe(m.$$.fragment,a),w=!0)},o(a){Xe(m.$$.fragment,a),w=!1},d(a){a&&u(t),Ye(m)}}}const Y=254;function Nt(e,t,s){let l;Ke(e,ve,_=>s(3,l=_));let o=0,d=0,r=1;function i(_,y){let T=_+y,w=_-y;T>Y&&(T=Y),w>Y&&(w=Y),T<-Y&&(T=-Y),w<-Y&&(w=-Y),ut({lm:T,rm:w})}function P(_){o=_,s(0,o)}function S(_){d=_,s(1,d)}function m(_){r=_,s(2,r)}return e.$$.update=()=>{e.$$.dirty&3&&i(o,d)},[o,d,r,l,P,S,m]}class jt extends be{constructor(t){super(),me(this,t,Nt,Bt,he,{})}}function Pt(e){let t,s,l,o;return{c(){t=g("div"),s=g("div"),l=g("div"),this.h()},l(d){t=p(d,"DIV",{class:!0});var r=h(t);s=p(r,"DIV",{class:!0});var i=h(s);l=p(i,"DIV",{class:!0,style:!0}),h(l).forEach(u),i.forEach(u),r.forEach(u),this.h()},h(){f(l,"class",o="battery-level "+e[1]+" svelte-xhchq0"),oe(l,"height",e[0]+"%"),f(s,"class","battery svelte-xhchq0"),f(t,"class","wrap svelte-xhchq0")},m(d,r){j(d,t,r),n(t,s),n(s,l)},p(d,[r]){r&2&&o!==(o="battery-level "+d[1]+" svelte-xhchq0")&&f(l,"class",o),r&1&&oe(l,"height",d[0]+"%")},i:pe,o:pe,d(d){d&&u(t)}}}function kt(e,t,s){let{percent:l}=t,o="";return l<10&&l>0?o="alert":l<30&&l>0?o="warn":l>100?o="charge":o="",e.$$set=d=>{"percent"in d&&s(0,l=d.percent)},[l,o]}class at extends be{constructor(t){super(),me(this,t,kt,Pt,he,{percent:0})}}function Dt(e){let t,s,l,o,d="Phone",r,i,P,S,m,_="BLE",y,T,w,k,G,O="Gps Acc",D,a=e[0].gps.accuracy+"",V,A;return i=new at({props:{percent:e[0].phoneBattery}}),T=new at({props:{percent:e[0].bleBattery}}),{c(){t=g("div"),s=g("ul"),l=g("li"),o=g("span"),o.textContent=d,r=B(),qe(i.$$.fragment),P=B(),S=g("li"),m=g("span"),m.textContent=_,y=B(),qe(T.$$.fragment),w=B(),k=g("li"),G=g("span"),G.textContent=O,D=B(),V=z(a),this.h()},l(c){t=p(c,"DIV",{});var b=h(t);s=p(b,"UL",{});var M=h(s);l=p(M,"LI",{class:!0});var L=h(l);o=p(L,"SPAN",{class:!0,"data-svelte-h":!0}),ce(o)!=="svelte-12ymgw7"&&(o.textContent=d),r=N(L),je(i.$$.fragment,L),L.forEach(u),P=N(M),S=p(M,"LI",{class:!0});var U=h(S);m=p(U,"SPAN",{class:!0,"data-svelte-h":!0}),ce(m)!=="svelte-4zsvbs"&&(m.textContent=_),y=N(U),je(T.$$.fragment,U),U.forEach(u),w=N(M),k=p(M,"LI",{class:!0});var q=h(k);G=p(q,"SPAN",{class:!0,"data-svelte-h":!0}),ce(G)!=="svelte-16gqpok"&&(G.textContent=O),D=N(q),V=F(q,a),q.forEach(u),M.forEach(u),b.forEach(u),this.h()},h(){f(o,"class","label"),f(l,"class","svelte-1y3lrug"),f(m,"class","label"),f(S,"class","svelte-1y3lrug"),f(G,"class","label"),f(k,"class","svelte-1y3lrug")},m(c,b){j(c,t,b),n(t,s),n(s,l),n(l,o),n(l,r),ze(i,l,null),n(s,P),n(s,S),n(S,m),n(S,y),ze(T,S,null),n(s,w),n(s,k),n(k,G),n(k,D),n(k,V),A=!0},p(c,[b]){const M={};b&1&&(M.percent=c[0].phoneBattery),i.$set(M);const L={};b&1&&(L.percent=c[0].bleBattery),T.$set(L),(!A||b&1)&&a!==(a=c[0].gps.accuracy+"")&&W(V,a)},i(c){A||(Fe(i.$$.fragment,c),Fe(T.$$.fragment,c),A=!0)},o(c){Xe(i.$$.fragment,c),Xe(T.$$.fragment,c),A=!1},d(c){c&&u(t),Ye(i),Ye(T)}}}function Vt(e,t,s){let l;Ke(e,ie,r=>s(0,l=r));let{isSender:o=!1}=t,d=0;return o&&(navigator.geolocation&&navigator.geolocation.getCurrentPosition(r=>{}),navigator.geolocation.watchPosition(r=>{ie.update(i=>({...i,gps:{lat:r.coords.latitude,lng:r.coords.longitude,alt:r.coords.altitude,accuracy:r.coords.accuracy}}))}),window.DeviceOrientationEvent&&(window.addEventListener("deviceorientation",function(r){d=r.alpha}),ie.update(r=>({...r,compass:d}))),typeof navigator.getBattery<"u"&&navigator.getBattery().then(function(r){Qe(ie,l.phoneBattery=r.level*100,l),r.addEventListener("levelchange",function(){Qe(ie,l.phoneBattery=r.level*100,l)})}).catch(r=>{console.log("battery error",r)}),_t.battery.onNotification(r=>{ht({bleBattery:parseInt(r)})})),e.$$set=r=>{"isSender"in r&&s(1,o=r.isSender)},[l,o]}class zt extends be{constructor(t){super(),me(this,t,Vt,Dt,he,{isSender:1})}}export{jt as C,zt as S,$t as a,Lt as b,ue as c,_t as d,et as e,Gt as f,qt as g,ve as s};
