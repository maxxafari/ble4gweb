import{s as ee,n as K,r as $}from"../chunks/scheduler.b0c1c2c3.js";import{S as te,i as le,g as m,m as V,s as y,h as C,j as w,n as j,f as g,c as I,y as z,a as N,A as a,o as q,k as H,D as J,C as L,E as ne}from"../chunks/index.00179a67.js";import{e as W,P as oe}from"../chunks/simplepeer.min.88c063de.js";const ae=!1,se=!0,de=Object.freeze(Object.defineProperty({__proto__:null,prerender:se,ssr:ae},Symbol.toStringTag,{value:"Module"}));function F(i,e,t){const v=i.slice();return v[13]=e[t],v}function Q(i){let e,t,v="Signal with data",l,o,k,f,x,E,p="Signal",_,T;return{c(){e=m("div"),t=m("h4"),t.textContent=v,l=y(),o=m("textarea"),k=y(),f=m("br"),x=y(),E=m("button"),E.textContent=p,this.h()},l(u){e=C(u,"DIV",{});var n=w(e);t=C(n,"H4",{"data-svelte-h":!0}),z(t)!=="svelte-1nuvgxm"&&(t.textContent=v),l=I(n),o=C(n,"TEXTAREA",{id:!0,class:!0}),w(o).forEach(g),k=I(n),f=C(n,"BR",{}),x=I(n),E=C(n,"BUTTON",{"data-svelte-h":!0}),z(E)!=="svelte-8ver9e"&&(E.textContent=p),n.forEach(g),this.h()},h(){H(o,"id","incoming"),H(o,"class","svelte-17de7ug")},m(u,n){N(u,e,n),a(e,t),a(e,l),a(e,o),J(o,i[1]),a(e,k),a(e,f),a(e,x),a(e,E),_||(T=[L(o,"input",i[8]),L(E,"click",i[9])],_=!0)},p(u,n){n&2&&J(o,u[1])},d(u){u&&g(e),_=!1,$(T)}}}function Y(i){let e,t,v="Connected",l,o,k,f=i[2]?"true":"false",x,E,p,_,T,u,n="Send",d,c,r,S="data",D,A,U,G,R=W(i[4]),b=[];for(let s=0;s<R.length;s+=1)b[s]=Z(F(i,R,s));return{c(){e=m("div"),t=m("h4"),t.textContent=v,l=y(),o=m("p"),k=V("connected: "),x=V(f),E=y(),p=m("div"),_=m("textarea"),T=y(),u=m("button"),u.textContent=n,d=y(),c=m("div"),r=m("h3"),r.textContent=S,D=y(),A=m("ul");for(let s=0;s<b.length;s+=1)b[s].c();this.h()},l(s){e=C(s,"DIV",{});var O=w(e);t=C(O,"H4",{"data-svelte-h":!0}),z(t)!=="svelte-znzixf"&&(t.textContent=v),l=I(O),o=C(O,"P",{});var h=w(o);k=j(h,"connected: "),x=j(h,f),h.forEach(g),O.forEach(g),E=I(s),p=C(s,"DIV",{});var P=w(p);_=C(P,"TEXTAREA",{id:!0,class:!0}),w(_).forEach(g),T=I(P),u=C(P,"BUTTON",{"data-svelte-h":!0}),z(u)!=="svelte-1vdl6z0"&&(u.textContent=n),P.forEach(g),d=I(s),c=C(s,"DIV",{});var B=w(c);r=C(B,"H3",{"data-svelte-h":!0}),z(r)!=="svelte-1fkupqc"&&(r.textContent=S),D=I(B),A=C(B,"UL",{});var X=w(A);for(let M=0;M<b.length;M+=1)b[M].l(X);X.forEach(g),B.forEach(g),this.h()},h(){H(_,"id","send"),H(_,"class","svelte-17de7ug")},m(s,O){N(s,e,O),a(e,t),a(e,l),a(e,o),a(o,k),a(o,x),N(s,E,O),N(s,p,O),a(p,_),J(_,i[3]),a(p,T),a(p,u),N(s,d,O),N(s,c,O),a(c,r),a(c,D),a(c,A);for(let h=0;h<b.length;h+=1)b[h]&&b[h].m(A,null);U||(G=[L(_,"input",i[10]),L(u,"click",i[11])],U=!0)},p(s,O){if(O&4&&f!==(f=s[2]?"true":"false")&&q(x,f),O&8&&J(_,s[3]),O&16){R=W(s[4]);let h;for(h=0;h<R.length;h+=1){const P=F(s,R,h);b[h]?b[h].p(P,O):(b[h]=Z(P),b[h].c(),b[h].m(A,null))}for(;h<b.length;h+=1)b[h].d(1);b.length=R.length}},d(s){s&&(g(e),g(E),g(p),g(d),g(c)),ne(b,s),U=!1,$(G)}}}function Z(i){let e,t=i[13]+"",v;return{c(){e=m("li"),v=V(t)},l(l){e=C(l,"LI",{});var o=w(e);v=j(o,t),o.forEach(g)},m(l,o){N(l,e,o),a(e,v)},p(l,o){o&16&&t!==(t=l[13]+"")&&q(v,t)},d(l){l&&g(e)}}}function re(i){let e,t,v,l=i[6]?"true":"false",o,k,f,x="My signal",E,p,_,T,u,n=!i[2]&&Q(i),d=i[2]&&Y(i);return{c(){e=m("div"),t=m("p"),v=V("initiator: "),o=V(l),k=y(),f=m("h4"),f.textContent=x,E=y(),p=m("pre"),_=V(i[5]),T=y(),n&&n.c(),u=y(),d&&d.c()},l(c){e=C(c,"DIV",{});var r=w(e);t=C(r,"P",{});var S=w(t);v=j(S,"initiator: "),o=j(S,l),S.forEach(g),k=I(r),f=C(r,"H4",{"data-svelte-h":!0}),z(f)!=="svelte-lmdtpo"&&(f.textContent=x),E=I(r),p=C(r,"PRE",{});var D=w(p);_=j(D,i[5]),D.forEach(g),T=I(r),n&&n.l(r),u=I(r),d&&d.l(r),r.forEach(g)},m(c,r){N(c,e,r),a(e,t),a(t,v),a(t,o),a(e,k),a(e,f),a(e,E),a(e,p),a(p,_),a(e,T),n&&n.m(e,null),a(e,u),d&&d.m(e,null)},p(c,[r]){r&32&&q(_,c[5]),c[2]?n&&(n.d(1),n=null):n?n.p(c,r):(n=Q(c),n.c(),n.m(e,u)),c[2]?d?d.p(c,r):(d=Y(c),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},i:K,o:K,d(c){c&&g(e),n&&n.d(),d&&d.d()}}}function ie(i,e,t){let v=location.hash==="#1",l=null,o="",k=!1,f="",x=[];(async()=>{console.log("onload...");const r=await(await fetch("https://maxxafari.metered.live/api/v1/turn/credentials?apiKey=3aea09a742976f93e50ffe3a1c7a287fc050")).json();console.log("iceServers",r),t(0,l=new oe({initiator:v,trickle:!1,config:{iceServers:r}})),window.peer=l,l.on("error",S=>console.log("error",S)),l.on("signal",S=>{console.log("SIGNAL",JSON.stringify(S)),t(5,_=JSON.stringify(S))}),l.on("connect",()=>{console.log("CONNECT"),t(2,k=!0),l==null||l.send("whatever"+new Date().toISOString())}),l.on("close",()=>{console.log("CLOSE"),t(2,k=!1)}),l.on("error",S=>{console.error("error",S),t(2,k=!1)}),l.on("data",S=>{console.log("GOT data:",S);try{x.push(S.toString()),t(4,x)}catch{console.error("could not parse data to string :/",S)}window.data=x})})();function p(){console.log("SUBMIT!: ",JSON.parse(o)),l==null||l.signal(JSON.parse(o))}let _="";function T(){o=this.value,t(1,o)}const u=()=>p();function n(){f=this.value,t(3,f)}return[l,o,k,f,x,_,v,p,T,u,n,()=>{l==null||l.send(f),t(3,f="")}]}class _e extends te{constructor(e){super(),le(this,e,ie,re,ee,{})}}export{_e as component,de as universal};
