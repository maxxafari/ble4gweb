import{s as te,n as G}from"../chunks/scheduler.b0c1c2c3.js";import{S as le,i as ne,g as f,m as A,s as S,h,j as m,n as q,f as d,c as y,y as B,k as F,a as ee,A as l,D as Q,C as ae,o as oe,E as se}from"../chunks/index.00179a67.js";import{e as W,P as re}from"../chunks/simplepeer.min.88c063de.js";const ie=!1,ce=!0,pe=Object.freeze(Object.defineProperty({__proto__:null,prerender:ce,ssr:ie},Symbol.toStringTag,{value:"Module"}));function Y(i,e,r){const c=i.slice();return c[7]=e[r],c}function Z(i){let e,r=i[7]+"",c;return{c(){e=f("li"),c=A(r)},l(a){e=h(a,"LI",{});var u=m(e);c=q(u,r),u.forEach(d)},m(a,u){ee(a,e,u),l(e,c)},p:G,d(a){a&&d(e)}}}function fe(i){let e,r,c,a=i[2]?"true":"false",u,C,p,D="signal peer1",P,b,E,_,v,w,K="Incomping",H,g,L,R,V,x,I,M="data",J,N,$,U,O=W(i[3]),o=[];for(let n=0;n<O.length;n+=1)o[n]=Z(Y(i,O,n));return{c(){e=f("div"),r=f("p"),c=A("initiator: "),u=A(a),C=S(),p=f("h4"),p.textContent=D,P=S(),b=f("pre"),E=A(i[1]),_=S(),v=f("div"),w=f("h4"),w.textContent=K,H=S(),g=f("textarea"),L=S(),R=f("br"),V=S(),x=f("div"),I=f("h3"),I.textContent=M,J=S(),N=f("ul");for(let n=0;n<o.length;n+=1)o[n].c();this.h()},l(n){e=h(n,"DIV",{});var s=m(e);r=h(s,"P",{});var t=m(r);c=q(t,"initiator: "),u=q(t,a),t.forEach(d),C=y(s),p=h(s,"H4",{"data-svelte-h":!0}),B(p)!=="svelte-1o8h0x"&&(p.textContent=D),P=y(s),b=h(s,"PRE",{});var j=m(b);E=q(j,i[1]),j.forEach(d),_=y(s),v=h(s,"DIV",{});var k=m(v);w=h(k,"H4",{"data-svelte-h":!0}),B(w)!=="svelte-bhljpq"&&(w.textContent=K),H=y(k),g=h(k,"TEXTAREA",{id:!0,class:!0}),m(g).forEach(d),L=y(k),R=h(k,"BR",{}),k.forEach(d),V=y(s),x=h(s,"DIV",{});var T=m(x);I=h(T,"H3",{"data-svelte-h":!0}),B(I)!=="svelte-1fkupqc"&&(I.textContent=M),J=y(T),N=h(T,"UL",{});var X=m(N);for(let z=0;z<o.length;z+=1)o[z].l(X);X.forEach(d),T.forEach(d),s.forEach(d),this.h()},h(){F(g,"id","incoming"),F(g,"class","svelte-17de7ug")},m(n,s){ee(n,e,s),l(e,r),l(r,c),l(r,u),l(e,C),l(e,p),l(e,P),l(e,b),l(b,E),l(e,_),l(e,v),l(v,w),l(v,H),l(v,g),Q(g,i[0]),l(v,L),l(v,R),l(e,V),l(e,x),l(x,I),l(x,J),l(x,N);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(N,null);$||(U=ae(g,"input",i[4]),$=!0)},p(n,[s]){if(s&2&&oe(E,n[1]),s&1&&Q(g,n[0]),s&8){O=W(n[3]);let t;for(t=0;t<O.length;t+=1){const j=Y(n,O,t);o[t]?o[t].p(j,s):(o[t]=Z(j),o[t].c(),o[t].m(N,null))}for(;t<o.length;t+=1)o[t].d(1);o.length=O.length}},i:G,o:G,d(n){n&&d(e),se(o,n),$=!1,U()}}}function he(i,e,r){let c=location.hash==="#1",a=null;(async()=>{console.log("onload...");const E=await(await fetch("https://maxxafari.metered.live/api/v1/turn/credentials?apiKey=3aea09a742976f93e50ffe3a1c7a287fc050")).json();console.log("iceServers",E),a=new re({initiator:c,trickle:!1,config:{iceServers:E}}),window.peer=a,a.on("error",_=>console.log("error",_)),a.on("signal",_=>{console.log("SIGNAL",JSON.stringify(_)),r(1,p=JSON.stringify(_))}),a.on("connect",()=>{console.log("CONNECT"),a==null||a.send("whatever"+new Date().toISOString)}),a.on("data",_=>{console.log("CONNECT"),_.push(_)})})();let C="",p="",D=[];function P(){C=this.value,r(0,C)}return[C,p,c,D,P]}class ve extends le{constructor(e){super(),ne(this,e,he,fe,te,{})}}export{ve as component,pe as universal};
