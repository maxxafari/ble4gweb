import{s as H,n as w,r as U,c as K,h as R,b as X}from"../chunks/scheduler.52935eb4.js";import{S as W,i as F,g,m as j,s as S,h as k,j as T,n as N,f as _,c as $,k as h,a as v,A as C,D,C as P,o as Y,E as J,B as Z,t as E,b as ee,d as I,p as te,r as O,z as q,u as V,v as L,w as M}from"../chunks/index.573d0439.js";import{s as B,e as ne,c as se,p as re,o as oe,g as ie,S as le}from"../chunks/peers.f3213fe5.js";import{G as ae}from"../chunks/Gps.b6b31036.js";import{w as ue}from"../chunks/index.c5ad5140.js";const pe=!1,ce=!0,Ee=Object.freeze(Object.defineProperty({__proto__:null,prerender:ce,ssr:pe},Symbol.toStringTag,{value:"Module"}));function _e(i){let e,s,n,t=G(i[0])+"",u,f,l,p,c,y;return{c(){e=g("div"),s=g("label"),n=j("Speed: "),u=j(t),f=S(),l=g("input"),p=j("\n```"),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=T(e);s=k(a,"LABEL",{for:!0,class:!0});var m=T(s);n=N(m,"Speed: "),u=N(m,t),m.forEach(_),f=$(a),l=k(a,"INPUT",{type:!0,name:!0,min:!0,max:!0,class:!0}),a.forEach(_),p=N(o,"\n```"),this.h()},h(){h(s,"for","speed"),h(s,"class","svelte-1kmidp6"),h(l,"type","range"),h(l,"name","speed"),h(l,"min","0"),h(l,"max","254"),h(l,"class","svelte-1kmidp6"),h(e,"class","svelte-1kmidp6")},m(o,a){v(o,e,a),C(e,s),C(s,n),C(s,u),C(e,f),C(e,l),D(l,i[0]),v(o,p,a),c||(y=[P(l,"change",i[1]),P(l,"input",i[1])],c=!0)},p(o,[a]){a&1&&t!==(t=G(o[0])+"")&&Y(u,t),a&1&&D(l,o[0])},i:w,o:w,d(o){o&&(_(e),_(p)),c=!1,U(y)}}}function G(i,e=3){const s="000000000"+i;return s.substr(s.length-e)}function fe(i,e,s){let n;K(i,B,p=>s(3,n=p));let t=50,u;const f=p=>{clearTimeout(u),u=setTimeout(()=>{p()},300)};function l(){t=J(this.value),s(0,t)}return i.$$.update=()=>{i.$$.dirty&1&&f(()=>{R(B,n.speed=t,n)})},[t,l]}class me extends W{constructor(e){super(),F(this,e,fe,_e,H,{})}}const de=async i=>{console.info("Creating new peer2"),await se(re,i)},Q=ue(ne("peer2"),()=>(console.info("new subscription for perStore2"),de(Q),()=>{console.info("No subscription  peer2")}));function ve(i){let e,s="<h4>Connected to peer1</h4>",n,t,u,f,l,p,c,y,o,a,m,z;function A(r,d){return r[1].mediaStream?be:ye}let x=A(i),b=x(i);return l=new me({}),c=new ae({}),o=new le({}),{c(){e=g("div"),e.innerHTML=s,n=S(),t=g("input"),u=S(),b.c(),f=S(),O(l.$$.fragment),p=S(),O(c.$$.fragment),y=S(),O(o.$$.fragment),this.h()},l(r){e=k(r,"DIV",{"data-svelte-h":!0}),q(e)!=="svelte-195tsj"&&(e.innerHTML=s),n=$(r),t=k(r,"INPUT",{type:!0,min:!0,max:!0}),u=$(r),b.l(r),f=$(r),V(l.$$.fragment,r),p=$(r),V(c.$$.fragment,r),y=$(r),V(o.$$.fragment,r),this.h()},h(){h(t,"type","range"),h(t,"min","0"),h(t,"max","180")},m(r,d){v(r,e,d),v(r,n,d),v(r,t,d),D(t,i[2]),v(r,u,d),b.m(r,d),v(r,f,d),L(l,r,d),v(r,p,d),L(c,r,d),v(r,y,d),L(o,r,d),a=!0,m||(z=[P(t,"change",i[3]),P(t,"input",i[3])],m=!0)},p(r,d){d&4&&D(t,r[2]),x===(x=A(r))&&b?b.p(r,d):(b.d(1),b=x(r),b&&(b.c(),b.m(f.parentNode,f)))},i(r){a||(I(l.$$.fragment,r),I(c.$$.fragment,r),I(o.$$.fragment,r),a=!0)},o(r){E(l.$$.fragment,r),E(c.$$.fragment,r),E(o.$$.fragment,r),a=!1},d(r){r&&(_(e),_(n),_(t),_(u),_(f),_(p),_(y)),b.d(r),M(l,r),M(c,r),M(o,r),m=!1,U(z)}}}function he(i){let e,s="Waiting for call (NOT initiator)";return{c(){e=g("p"),e.textContent=s},l(n){e=k(n,"P",{"data-svelte-h":!0}),q(e)!=="svelte-y1cfax"&&(e.textContent=s)},m(n,t){v(n,e,t)},p:w,i:w,o:w,d(n){n&&_(e)}}}function be(i){let e,s;return{c(){e=g("div"),s=g("video"),this.h()},l(n){e=k(n,"DIV",{class:!0});var t=T(e);s=k(t,"VIDEO",{class:!0}),T(s).forEach(_),t.forEach(_),this.h()},h(){s.autoplay=!0,s.muted=!0,h(s,"class","svelte-1aquvxy"),h(e,"class","video-container")},m(n,t){v(n,e,t),C(e,s),i[4](s)},p:w,d(n){n&&_(e),i[4](null)}}}function ye(i){let e,s="No video streamed";return{c(){e=g("p"),e.textContent=s},l(n){e=k(n,"P",{"data-svelte-h":!0}),q(e)!=="svelte-1p0v38x"&&(e.textContent=s)},m(n,t){v(n,e,t)},p:w,d(n){n&&_(e)}}}function ge(i){let e,s,n,t,u,f,l;const p=[he,ve],c=[];function y(o,a){var m;return(m=o[1].dataConn)!=null&&m.open?1:0}return n=y(i),t=c[n]=p[n](i),{c(){e=S(),s=g("div"),t.c(),this.h()},l(o){Z("svelte-1y0w2j6",document.head).forEach(_),e=$(o),s=k(o,"DIV",{});var m=T(s);t.l(m),m.forEach(_),this.h()},h(){document.title="Peer2"},m(o,a){v(o,e,a),v(o,s,a),c[n].m(s,null),u=!0,f||(l=[P(window,"keydown",oe),P(window,"keyup",ie)],f=!0)},p(o,[a]){let m=n;n=y(o),n===m?c[n].p(o,a):(te(),E(c[m],1,1,()=>{c[m]=null}),ee(),t=c[n],t?t.p(o,a):(t=c[n]=p[n](o),t.c()),I(t,1),t.m(s,null))},i(o){u||(I(t),u=!0)},o(o){E(t),u=!1},d(o){o&&(_(e),_(s)),c[n].d(),f=!1,U(l)}}}function ke(i,e,s){let n;K(i,Q,p=>s(1,n=p));let t,u=0;function f(){u=J(this.value),s(2,u)}function l(p){X[p?"unshift":"push"](()=>{t=p,s(0,t),s(1,n)})}return i.$$.update=()=>{i.$$.dirty&3&&n.mediaStream&&t&&s(0,t.srcObject=n.mediaStream,t)},[t,n,u,f,l]}class Ie extends W{constructor(e){super(),F(this,e,ke,ge,H,{})}}export{Ie as component,Ee as universal};
