import{s as G,n as C,r as H,c as U,i as R,b as X}from"../chunks/scheduler.da9d0849.js";import{S as F,i as J,g,m as L,s as S,h as y,j as I,n as M,f,c as k,k as h,a as v,A as w,D as O,C as V,o as Y,E as K,r as x,B as Z,u as j,v as D,t as P,b as ee,d as E,w as N,p as te,z as W}from"../chunks/index.5d2acbf4.js";import{s as A,C as ne,S as se}from"../chunks/Status.88071cc1.js";import{G as re}from"../chunks/Gps.e1606037.js";import{e as ie,c as le,p as oe}from"../chunks/peers.53369094.js";import{w as ae}from"../chunks/index.b9f67257.js";const ue=!1,pe=!0,Ee=Object.freeze(Object.defineProperty({__proto__:null,prerender:pe,ssr:ue},Symbol.toStringTag,{value:"Module"}));function ce(l){let e,s,n,t=B(l[0])+"",p,u,o,c,_,$;return{c(){e=g("div"),s=g("label"),n=L("Speed: "),p=L(t),u=S(),o=g("input"),c=L("\n```"),this.h()},l(i){e=y(i,"DIV",{class:!0});var a=I(e);s=y(a,"LABEL",{for:!0,class:!0});var m=I(s);n=M(m,"Speed: "),p=M(m,t),m.forEach(f),u=k(a),o=y(a,"INPUT",{type:!0,name:!0,min:!0,max:!0,class:!0}),a.forEach(f),c=M(i,"\n```"),this.h()},h(){h(s,"for","speed"),h(s,"class","svelte-1kmidp6"),h(o,"type","range"),h(o,"name","speed"),h(o,"min","0"),h(o,"max","254"),h(o,"class","svelte-1kmidp6"),h(e,"class","svelte-1kmidp6")},m(i,a){v(i,e,a),w(e,s),w(s,n),w(s,p),w(e,u),w(e,o),O(o,l[0]),v(i,c,a),_||($=[V(o,"change",l[1]),V(o,"input",l[1])],_=!0)},p(i,[a]){a&1&&t!==(t=B(i[0])+"")&&Y(p,t),a&1&&O(o,i[0])},i:C,o:C,d(i){i&&(f(e),f(c)),_=!1,H($)}}}function B(l,e=3){const s="000000000"+l;return s.substr(s.length-e)}function fe(l,e,s){let n;U(l,A,c=>s(3,n=c));let t=50,p;const u=c=>{clearTimeout(p),p=setTimeout(()=>{c()},300)};function o(){t=K(this.value),s(0,t)}return l.$$.update=()=>{l.$$.dirty&1&&u(()=>{R(A,n.speed=t,n)})},[t,o]}class _e extends F{constructor(e){super(),J(this,e,fe,ce,G,{})}}const me=async l=>{console.info("Creating new peer2"),await le(oe,l)},Q=ae(ie("peer2"),()=>(console.info("new subscription for perStore2"),me(Q),()=>{console.info("No subscription  peer2")}));function de(l){let e,s="<h4>Connected to peer1</h4>",n,t,p,u,o,c,_,$,i,a,m,q;function z(r,d){return r[1].mediaStream?he:be}let T=z(l),b=T(l);return o=new _e({}),_=new re({}),i=new se({}),{c(){e=g("div"),e.innerHTML=s,n=S(),t=g("input"),p=S(),b.c(),u=S(),x(o.$$.fragment),c=S(),x(_.$$.fragment),$=S(),x(i.$$.fragment),this.h()},l(r){e=y(r,"DIV",{"data-svelte-h":!0}),W(e)!=="svelte-195tsj"&&(e.innerHTML=s),n=k(r),t=y(r,"INPUT",{type:!0,min:!0,max:!0}),p=k(r),b.l(r),u=k(r),j(o.$$.fragment,r),c=k(r),j(_.$$.fragment,r),$=k(r),j(i.$$.fragment,r),this.h()},h(){h(t,"type","range"),h(t,"min","0"),h(t,"max","180")},m(r,d){v(r,e,d),v(r,n,d),v(r,t,d),O(t,l[2]),v(r,p,d),b.m(r,d),v(r,u,d),D(o,r,d),v(r,c,d),D(_,r,d),v(r,$,d),D(i,r,d),a=!0,m||(q=[V(t,"change",l[3]),V(t,"input",l[3])],m=!0)},p(r,d){d&4&&O(t,r[2]),T===(T=z(r))&&b?b.p(r,d):(b.d(1),b=T(r),b&&(b.c(),b.m(u.parentNode,u)))},i(r){a||(E(o.$$.fragment,r),E(_.$$.fragment,r),E(i.$$.fragment,r),a=!0)},o(r){P(o.$$.fragment,r),P(_.$$.fragment,r),P(i.$$.fragment,r),a=!1},d(r){r&&(f(e),f(n),f(t),f(p),f(u),f(c),f($)),b.d(r),N(o,r),N(_,r),N(i,r),m=!1,H(q)}}}function ve(l){let e,s="Waiting for call (NOT initiator)";return{c(){e=g("p"),e.textContent=s},l(n){e=y(n,"P",{"data-svelte-h":!0}),W(e)!=="svelte-y1cfax"&&(e.textContent=s)},m(n,t){v(n,e,t)},p:C,i:C,o:C,d(n){n&&f(e)}}}function he(l){let e,s;return{c(){e=g("div"),s=g("video"),this.h()},l(n){e=y(n,"DIV",{class:!0});var t=I(e);s=y(t,"VIDEO",{class:!0}),I(s).forEach(f),t.forEach(f),this.h()},h(){s.autoplay=!0,s.muted=!0,h(s,"class","svelte-1aquvxy"),h(e,"class","video-container")},m(n,t){v(n,e,t),w(e,s),l[4](s)},p:C,d(n){n&&f(e),l[4](null)}}}function be(l){let e,s="No video streamed";return{c(){e=g("p"),e.textContent=s},l(n){e=y(n,"P",{"data-svelte-h":!0}),W(e)!=="svelte-1p0v38x"&&(e.textContent=s)},m(n,t){v(n,e,t)},p:C,d(n){n&&f(e)}}}function $e(l){let e,s,n,t,p,u,o;const c=[ve,de],_=[];function $(i,a){var m;return(m=i[1].dataConn)!=null&&m.open?1:0}return n=$(l),t=_[n]=c[n](l),u=new ne({}),{c(){e=S(),s=g("div"),t.c(),p=S(),x(u.$$.fragment),this.h()},l(i){Z("svelte-1y0w2j6",document.head).forEach(f),e=k(i),s=y(i,"DIV",{});var m=I(s);t.l(m),m.forEach(f),p=k(i),j(u.$$.fragment,i),this.h()},h(){document.title="Peer2"},m(i,a){v(i,e,a),v(i,s,a),_[n].m(s,null),v(i,p,a),D(u,i,a),o=!0},p(i,[a]){let m=n;n=$(i),n===m?_[n].p(i,a):(te(),P(_[m],1,1,()=>{_[m]=null}),ee(),t=_[n],t?t.p(i,a):(t=_[n]=c[n](i),t.c()),E(t,1),t.m(s,null))},i(i){o||(E(t),E(u.$$.fragment,i),o=!0)},o(i){P(t),P(u.$$.fragment,i),o=!1},d(i){i&&(f(e),f(s),f(p)),_[n].d(),N(u,i)}}}function ge(l,e,s){let n;U(l,Q,c=>s(1,n=c));let t,p=0;function u(){p=K(this.value),s(2,p)}function o(c){X[c?"unshift":"push"](()=>{t=c,s(0,t),s(1,n)})}return l.$$.update=()=>{l.$$.dirty&3&&n.mediaStream&&t&&s(0,t.srcObject=n.mediaStream,t)},[t,n,p,u,o]}class Ie extends F{constructor(e){super(),J(this,e,ge,$e,G,{})}}export{Ie as component,Ee as universal};
