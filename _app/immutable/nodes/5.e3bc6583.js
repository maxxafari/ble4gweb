import{s as W,c as q,b as z,r as G,n as S}from"../chunks/scheduler.396ab924.js";import{S as H,i as L,s as g,g as y,r as j,B as A,f as u,c as k,h as $,j as x,u as E,a as v,v as D,t as C,b as B,d as w,w as N,p as U,D as F,z as O,k as P,E as T,C as V,A as J}from"../chunks/index.2cee157a.js";import{G as K}from"../chunks/Gps.834431e5.js";import{e as Q,c as R,p as X}from"../chunks/peers.95a3d0bb.js";import{w as Y}from"../chunks/index.7cfe3c3c.js";import{C as Z,S as ee}from"../chunks/Status.cd8930fb.js";const te=!1,ne=!0,ve=Object.freeze(Object.defineProperty({__proto__:null,prerender:ne,ssr:te},Symbol.toStringTag,{value:"Module"})),re=async i=>{console.info("Creating new peer2"),await R(X,i)},M=Y(Q("peer2"),()=>(console.info("new subscription for perStore2"),re(M),()=>{console.info("No subscription  peer2")}));function se(i){let n,s="<h4>Connected to peer1</h4>",e,t,p,a,c,_,l,b,o,m;function d(r,f){return r[1].mediaStream?ie:ae}let I=d(i),h=I(i);return c=new K({}),l=new ee({}),{c(){n=y("div"),n.innerHTML=s,e=g(),t=y("input"),p=g(),h.c(),a=g(),j(c.$$.fragment),_=g(),j(l.$$.fragment),this.h()},l(r){n=$(r,"DIV",{"data-svelte-h":!0}),O(n)!=="svelte-195tsj"&&(n.innerHTML=s),e=k(r),t=$(r,"INPUT",{type:!0,min:!0,max:!0}),p=k(r),h.l(r),a=k(r),E(c.$$.fragment,r),_=k(r),E(l.$$.fragment,r),this.h()},h(){P(t,"type","range"),P(t,"min","0"),P(t,"max","180")},m(r,f){v(r,n,f),v(r,e,f),v(r,t,f),T(t,i[2]),v(r,p,f),h.m(r,f),v(r,a,f),D(c,r,f),v(r,_,f),D(l,r,f),b=!0,o||(m=[V(t,"change",i[3]),V(t,"input",i[3])],o=!0)},p(r,f){f&4&&T(t,r[2]),I===(I=d(r))&&h?h.p(r,f):(h.d(1),h=I(r),h&&(h.c(),h.m(a.parentNode,a)))},i(r){b||(w(c.$$.fragment,r),w(l.$$.fragment,r),b=!0)},o(r){C(c.$$.fragment,r),C(l.$$.fragment,r),b=!1},d(r){r&&(u(n),u(e),u(t),u(p),u(a),u(_)),h.d(r),N(c,r),N(l,r),o=!1,G(m)}}}function oe(i){let n,s="Waiting for call (NOT initiator)";return{c(){n=y("p"),n.textContent=s},l(e){n=$(e,"P",{"data-svelte-h":!0}),O(n)!=="svelte-y1cfax"&&(n.textContent=s)},m(e,t){v(e,n,t)},p:S,i:S,o:S,d(e){e&&u(n)}}}function ie(i){let n,s;return{c(){n=y("div"),s=y("video"),this.h()},l(e){n=$(e,"DIV",{class:!0});var t=x(n);s=$(t,"VIDEO",{class:!0}),x(s).forEach(u),t.forEach(u),this.h()},h(){s.autoplay=!0,s.muted=!0,P(s,"class","svelte-1aquvxy"),P(n,"class","video-container")},m(e,t){v(e,n,t),J(n,s),i[4](s)},p:S,d(e){e&&u(n),i[4](null)}}}function ae(i){let n,s="No video streamed";return{c(){n=y("p"),n.textContent=s},l(e){n=$(e,"P",{"data-svelte-h":!0}),O(n)!=="svelte-1p0v38x"&&(n.textContent=s)},m(e,t){v(e,n,t)},p:S,d(e){e&&u(n)}}}function le(i){let n,s,e,t,p,a,c;const _=[oe,se],l=[];function b(o,m){var d;return(d=o[1].dataConn)!=null&&d.open?1:0}return e=b(i),t=l[e]=_[e](i),a=new Z({}),{c(){n=g(),s=y("div"),t.c(),p=g(),j(a.$$.fragment),this.h()},l(o){A("svelte-1y0w2j6",document.head).forEach(u),n=k(o),s=$(o,"DIV",{});var d=x(s);t.l(d),d.forEach(u),p=k(o),E(a.$$.fragment,o),this.h()},h(){document.title="Peer2"},m(o,m){v(o,n,m),v(o,s,m),l[e].m(s,null),v(o,p,m),D(a,o,m),c=!0},p(o,[m]){let d=e;e=b(o),e===d?l[e].p(o,m):(U(),C(l[d],1,1,()=>{l[d]=null}),B(),t=l[e],t?t.p(o,m):(t=l[e]=_[e](o),t.c()),w(t,1),t.m(s,null))},i(o){c||(w(t),w(a.$$.fragment,o),c=!0)},o(o){C(t),C(a.$$.fragment,o),c=!1},d(o){o&&(u(n),u(s),u(p)),l[e].d(),N(a,o)}}}function ue(i,n,s){let e;q(i,M,_=>s(1,e=_));let t,p=0;function a(){p=F(this.value),s(2,p)}function c(_){z[_?"unshift":"push"](()=>{t=_,s(0,t),s(1,e)})}return i.$$.update=()=>{i.$$.dirty&3&&e.mediaStream&&t&&s(0,t.srcObject=e.mediaStream,t)},[t,e,p,a,c]}class he extends H{constructor(n){super(),L(this,n,ue,le,W,{})}}export{he as component,ve as universal};
