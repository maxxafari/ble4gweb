import{s as oe,n as G,r as se}from"../chunks/scheduler.b0c1c2c3.js";import{S as re,i as ie,g as d,m as R,s as C,h as u,j as x,n as B,f as p,c as S,y as J,k as Y,a as ae,A as t,D as Z,C as ee,o as ce,E as fe}from"../chunks/index.00179a67.js";import{e as te,P as he}from"../chunks/simplepeer.min.88c063de.js";const _e=!1,de=!0,Ce=Object.freeze(Object.defineProperty({__proto__:null,prerender:de,ssr:_e},Symbol.toStringTag,{value:"Module"}));function le(r,e,i){const _=r.slice();return _[9]=e[i],_}function ne(r){let e,i=r[9]+"",_;return{c(){e=d("li"),_=R(i)},l(l){e=u(l,"LI",{});var c=x(e);_=B(c,i),c.forEach(p)},m(l,c){ae(l,e,c),t(e,_)},p:G,d(l){l&&p(e)}}}function ue(r){let e,i,_,l=r[2]?"true":"false",c,D,v,w="My signal",T,E,I,j,f,h,K="Signal with data",H,g,L,M,U,y,W="Signal",V,N,O,X="data",q,b,$,F,k=te(r[4]),o=[];for(let a=0;a<k.length;a+=1)o[a]=ne(le(r,k,a));return{c(){e=d("div"),i=d("p"),_=R("initiator: "),c=R(l),D=C(),v=d("h4"),v.textContent=w,T=C(),E=d("pre"),I=R(r[1]),j=C(),f=d("div"),h=d("h4"),h.textContent=K,H=C(),g=d("textarea"),L=C(),M=d("br"),U=C(),y=d("button"),y.textContent=W,V=C(),N=d("div"),O=d("h3"),O.textContent=X,q=C(),b=d("ul");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){e=u(a,"DIV",{});var s=x(e);i=u(s,"P",{});var n=x(i);_=B(n,"initiator: "),c=B(n,l),n.forEach(p),D=S(s),v=u(s,"H4",{"data-svelte-h":!0}),J(v)!=="svelte-lmdtpo"&&(v.textContent=w),T=S(s),E=u(s,"PRE",{});var P=x(E);I=B(P,r[1]),P.forEach(p),j=S(s),f=u(s,"DIV",{});var m=x(f);h=u(m,"H4",{"data-svelte-h":!0}),J(h)!=="svelte-1nuvgxm"&&(h.textContent=K),H=S(m),g=u(m,"TEXTAREA",{id:!0,class:!0}),x(g).forEach(p),L=S(m),M=u(m,"BR",{}),U=S(m),y=u(m,"BUTTON",{"data-svelte-h":!0}),J(y)!=="svelte-8ver9e"&&(y.textContent=W),m.forEach(p),V=S(s),N=u(s,"DIV",{});var A=x(N);O=u(A,"H3",{"data-svelte-h":!0}),J(O)!=="svelte-1fkupqc"&&(O.textContent=X),q=S(A),b=u(A,"UL",{});var Q=x(b);for(let z=0;z<o.length;z+=1)o[z].l(Q);Q.forEach(p),A.forEach(p),s.forEach(p),this.h()},h(){Y(g,"id","incoming"),Y(g,"class","svelte-17de7ug")},m(a,s){ae(a,e,s),t(e,i),t(i,_),t(i,c),t(e,D),t(e,v),t(e,T),t(e,E),t(E,I),t(e,j),t(e,f),t(f,h),t(f,H),t(f,g),Z(g,r[0]),t(f,L),t(f,M),t(f,U),t(f,y),t(e,V),t(e,N),t(N,O),t(N,q),t(N,b);for(let n=0;n<o.length;n+=1)o[n]&&o[n].m(b,null);$||(F=[ee(g,"input",r[5]),ee(y,"click",r[6])],$=!0)},p(a,[s]){if(s&2&&ce(I,a[1]),s&1&&Z(g,a[0]),s&16){k=te(a[4]);let n;for(n=0;n<k.length;n+=1){const P=le(a,k,n);o[n]?o[n].p(P,s):(o[n]=ne(P),o[n].c(),o[n].m(b,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=k.length}},i:G,o:G,d(a){a&&p(e),fe(o,a),$=!1,se(F)}}}function pe(r,e,i){let _=location.hash==="#1",l=null,c="";(async()=>{console.log("onload...");const f=await(await fetch("https://maxxafari.metered.live/api/v1/turn/credentials?apiKey=3aea09a742976f93e50ffe3a1c7a287fc050")).json();console.log("iceServers",f),l=new he({initiator:_,trickle:!1,config:{iceServers:f}}),window.peer=l,l.on("error",h=>console.log("error",h)),l.on("signal",h=>{console.log("SIGNAL",JSON.stringify(h)),i(1,w=JSON.stringify(h))}),l.on("connect",()=>{console.log("CONNECT"),l==null||l.send("whatever"+new Date().toISOString)}),l.on("data",h=>{console.log("CONNECT"),h.push(h)})})();function v(){console.log("SUBMIT!: ",JSON.parse(c)),l==null||l.signal(JSON.parse(c))}let w="",T=[];function E(){c=this.value,i(0,c)}return[c,w,_,v,T,E,()=>v()]}class Se extends re{constructor(e){super(),ie(this,e,pe,ue,oe,{})}}export{Se as component,Ce as universal};
