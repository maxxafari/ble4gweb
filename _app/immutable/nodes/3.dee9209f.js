import{s as ee,n as q,r as Z}from"../chunks/scheduler.b0c1c2c3.js";import{S as te,i as le,g as m,m as V,s as y,h as C,j as w,n as j,f as p,c as I,y as z,a as N,A as a,o as $,k as H,D as J,C as L,E as ne}from"../chunks/index.00179a67.js";import{e as K,P as oe}from"../chunks/simplepeer.min.88c063de.js";const ae=!1,se=!0,de=Object.freeze(Object.defineProperty({__proto__:null,prerender:se,ssr:ae},Symbol.toStringTag,{value:"Module"}));function W(i,e,l){const g=i.slice();return g[13]=e[l],g}function F(i){let e,l,g="Signal with data",t,o,k,f,x,E,v="Signal",_,T;return{c(){e=m("div"),l=m("h4"),l.textContent=g,t=y(),o=m("textarea"),k=y(),f=m("br"),x=y(),E=m("button"),E.textContent=v,this.h()},l(u){e=C(u,"DIV",{});var n=w(e);l=C(n,"H4",{"data-svelte-h":!0}),z(l)!=="svelte-1nuvgxm"&&(l.textContent=g),t=I(n),o=C(n,"TEXTAREA",{id:!0,class:!0}),w(o).forEach(p),k=I(n),f=C(n,"BR",{}),x=I(n),E=C(n,"BUTTON",{"data-svelte-h":!0}),z(E)!=="svelte-8ver9e"&&(E.textContent=v),n.forEach(p),this.h()},h(){H(o,"id","incoming"),H(o,"class","svelte-17de7ug")},m(u,n){N(u,e,n),a(e,l),a(e,t),a(e,o),J(o,i[1]),a(e,k),a(e,f),a(e,x),a(e,E),_||(T=[L(o,"input",i[8]),L(E,"click",i[9])],_=!0)},p(u,n){n&2&&J(o,u[1])},d(u){u&&p(e),_=!1,Z(T)}}}function Q(i){let e,l,g="Connected",t,o,k,f=i[2]?"true":"false",x,E,v,_,T,u,n="Send",d,c,r,S="data",D,A,U,G,R=K(i[6]),b=[];for(let s=0;s<R.length;s+=1)b[s]=Y(W(i,R,s));return{c(){e=m("div"),l=m("h4"),l.textContent=g,t=y(),o=m("p"),k=V("connected: "),x=V(f),E=y(),v=m("div"),_=m("textarea"),T=y(),u=m("button"),u.textContent=n,d=y(),c=m("div"),r=m("h3"),r.textContent=S,D=y(),A=m("ul");for(let s=0;s<b.length;s+=1)b[s].c();this.h()},l(s){e=C(s,"DIV",{});var O=w(e);l=C(O,"H4",{"data-svelte-h":!0}),z(l)!=="svelte-znzixf"&&(l.textContent=g),t=I(O),o=C(O,"P",{});var h=w(o);k=j(h,"connected: "),x=j(h,f),h.forEach(p),O.forEach(p),E=I(s),v=C(s,"DIV",{});var P=w(v);_=C(P,"TEXTAREA",{id:!0,class:!0}),w(_).forEach(p),T=I(P),u=C(P,"BUTTON",{"data-svelte-h":!0}),z(u)!=="svelte-1vdl6z0"&&(u.textContent=n),P.forEach(p),d=I(s),c=C(s,"DIV",{});var B=w(c);r=C(B,"H3",{"data-svelte-h":!0}),z(r)!=="svelte-1fkupqc"&&(r.textContent=S),D=I(B),A=C(B,"UL",{});var X=w(A);for(let M=0;M<b.length;M+=1)b[M].l(X);X.forEach(p),B.forEach(p),this.h()},h(){H(_,"id","send"),H(_,"class","svelte-17de7ug")},m(s,O){N(s,e,O),a(e,l),a(e,t),a(e,o),a(o,k),a(o,x),N(s,E,O),N(s,v,O),a(v,_),J(_,i[3]),a(v,T),a(v,u),N(s,d,O),N(s,c,O),a(c,r),a(c,D),a(c,A);for(let h=0;h<b.length;h+=1)b[h]&&b[h].m(A,null);U||(G=[L(_,"input",i[10]),L(u,"click",i[11])],U=!0)},p(s,O){if(O&4&&f!==(f=s[2]?"true":"false")&&$(x,f),O&8&&J(_,s[3]),O&64){R=K(s[6]);let h;for(h=0;h<R.length;h+=1){const P=W(s,R,h);b[h]?b[h].p(P,O):(b[h]=Y(P),b[h].c(),b[h].m(A,null))}for(;h<b.length;h+=1)b[h].d(1);b.length=R.length}},d(s){s&&(p(e),p(E),p(v),p(d),p(c)),ne(b,s),U=!1,Z(G)}}}function Y(i){let e,l=i[13]+"",g;return{c(){e=m("li"),g=V(l)},l(t){e=C(t,"LI",{});var o=w(e);g=j(o,l),o.forEach(p)},m(t,o){N(t,e,o),a(e,g)},p:q,d(t){t&&p(e)}}}function re(i){let e,l,g,t=i[5]?"true":"false",o,k,f,x="My signal",E,v,_,T,u,n=!i[2]&&F(i),d=i[2]&&Q(i);return{c(){e=m("div"),l=m("p"),g=V("initiator: "),o=V(t),k=y(),f=m("h4"),f.textContent=x,E=y(),v=m("pre"),_=V(i[4]),T=y(),n&&n.c(),u=y(),d&&d.c()},l(c){e=C(c,"DIV",{});var r=w(e);l=C(r,"P",{});var S=w(l);g=j(S,"initiator: "),o=j(S,t),S.forEach(p),k=I(r),f=C(r,"H4",{"data-svelte-h":!0}),z(f)!=="svelte-lmdtpo"&&(f.textContent=x),E=I(r),v=C(r,"PRE",{});var D=w(v);_=j(D,i[4]),D.forEach(p),T=I(r),n&&n.l(r),u=I(r),d&&d.l(r),r.forEach(p)},m(c,r){N(c,e,r),a(e,l),a(l,g),a(l,o),a(e,k),a(e,f),a(e,E),a(e,v),a(v,_),a(e,T),n&&n.m(e,null),a(e,u),d&&d.m(e,null)},p(c,[r]){r&16&&$(_,c[4]),c[2]?n&&(n.d(1),n=null):n?n.p(c,r):(n=F(c),n.c(),n.m(e,u)),c[2]?d?d.p(c,r):(d=Q(c),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},i:q,o:q,d(c){c&&p(e),n&&n.d(),d&&d.d()}}}function ie(i,e,l){let g=location.hash==="#1",t=null,o="",k=!1,f="",x=[];(async()=>{console.log("onload...");const r=await(await fetch("https://maxxafari.metered.live/api/v1/turn/credentials?apiKey=3aea09a742976f93e50ffe3a1c7a287fc050")).json();console.log("iceServers",r),l(0,t=new oe({initiator:g,trickle:!1,config:{iceServers:r}})),window.peer=t,t.on("error",S=>console.log("error",S)),t.on("signal",S=>{console.log("SIGNAL",JSON.stringify(S)),l(4,_=JSON.stringify(S))}),t.on("connect",()=>{console.log("CONNECT"),l(2,k=!0),t==null||t.send("whatever"+new Date().toISOString())}),t.on("close",()=>{console.log("CLOSE"),l(2,k=!1)}),t.on("error",S=>{console.error("error",S),l(2,k=!1)}),t.on("data",S=>{console.log("GOT data:",S);try{x.push(S.toString())}catch{console.error("could not parse data to string :/",S)}window.data=x})})();function v(){console.log("SUBMIT!: ",JSON.parse(o)),t==null||t.signal(JSON.parse(o))}let _="";function T(){o=this.value,l(1,o)}const u=()=>v();function n(){f=this.value,l(3,f)}return[t,o,k,f,_,g,x,v,T,u,n,()=>{t==null||t.send(f),l(3,f="")}]}class _e extends te{constructor(e){super(),le(this,e,ie,re,ee,{})}}export{_e as component,de as universal};
