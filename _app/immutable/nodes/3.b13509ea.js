import{s as he,n as ne,r as ue}from"../chunks/scheduler.b0c1c2c3.js";import{S as _e,i as ve,g as d,m as G,s as p,h as f,j as C,n as X,f as v,c as m,y as J,k as H,a as fe,A as t,D as M,C as q,o as ge,E as pe}from"../chunks/index.00179a67.js";import{e as ie,P as me}from"../chunks/simplepeer.min.88c063de.js";const Ce=!1,Se=!0,be=Object.freeze(Object.defineProperty({__proto__:null,prerender:Se,ssr:Ce},Symbol.toStringTag,{value:"Module"}));function ce(r,e,i){const u=r.slice();return u[13]=e[i],u}function de(r){let e,i=r[13]+"",u;return{c(){e=d("li"),u=G(i)},l(n){e=f(n,"LI",{});var h=C(e);u=X(h,i),h.forEach(v)},m(n,h){fe(n,e,h),t(e,u)},p:ne,d(n){n&&v(e)}}}function Ee(r){let e,i,u,n=r[4]?"true":"false",h,S,g,z="My signal",N,x,I,R,_,O,K="Signal with data",A,o,L,W,F,T,le="Signal",Q,b,E,Y,k,ae="Send",Z,w,D,oe="data",$,P,ee,se,j=ie(r[5]),c=[];for(let l=0;l<j.length;l+=1)c[l]=de(ce(r,j,l));return{c(){e=d("div"),i=d("p"),u=G("initiator: "),h=G(n),S=p(),g=d("h4"),g.textContent=z,N=p(),x=d("pre"),I=G(r[3]),R=p(),_=d("div"),O=d("h4"),O.textContent=K,A=p(),o=d("textarea"),L=p(),W=d("br"),F=p(),T=d("button"),T.textContent=le,Q=p(),b=d("div"),E=d("textarea"),Y=p(),k=d("button"),k.textContent=ae,Z=p(),w=d("div"),D=d("h3"),D.textContent=oe,$=p(),P=d("ul");for(let l=0;l<c.length;l+=1)c[l].c();this.h()},l(l){e=f(l,"DIV",{});var s=C(e);i=f(s,"P",{});var a=C(i);u=X(a,"initiator: "),h=X(a,n),a.forEach(v),S=m(s),g=f(s,"H4",{"data-svelte-h":!0}),J(g)!=="svelte-lmdtpo"&&(g.textContent=z),N=m(s),x=f(s,"PRE",{});var B=C(x);I=X(B,r[3]),B.forEach(v),R=m(s),_=f(s,"DIV",{});var y=C(_);O=f(y,"H4",{"data-svelte-h":!0}),J(O)!=="svelte-1nuvgxm"&&(O.textContent=K),A=m(y),o=f(y,"TEXTAREA",{id:!0,class:!0}),C(o).forEach(v),L=m(y),W=f(y,"BR",{}),F=m(y),T=f(y,"BUTTON",{"data-svelte-h":!0}),J(T)!=="svelte-8ver9e"&&(T.textContent=le),y.forEach(v),Q=m(s),b=f(s,"DIV",{});var U=C(b);E=f(U,"TEXTAREA",{id:!0,class:!0}),C(E).forEach(v),Y=m(U),k=f(U,"BUTTON",{"data-svelte-h":!0}),J(k)!=="svelte-1ygjgmv"&&(k.textContent=ae),U.forEach(v),Z=m(s),w=f(s,"DIV",{});var V=C(w);D=f(V,"H3",{"data-svelte-h":!0}),J(D)!=="svelte-1fkupqc"&&(D.textContent=oe),$=m(V),P=f(V,"UL",{});var re=C(P);for(let te=0;te<c.length;te+=1)c[te].l(re);re.forEach(v),V.forEach(v),s.forEach(v),this.h()},h(){H(o,"id","incoming"),H(o,"class","svelte-17de7ug"),H(E,"id","send"),H(E,"class","svelte-17de7ug")},m(l,s){fe(l,e,s),t(e,i),t(i,u),t(i,h),t(e,S),t(e,g),t(e,N),t(e,x),t(x,I),t(e,R),t(e,_),t(_,O),t(_,A),t(_,o),M(o,r[1]),t(_,L),t(_,W),t(_,F),t(_,T),t(e,Q),t(e,b),t(b,E),M(E,r[2]),t(b,Y),t(b,k),t(e,Z),t(e,w),t(w,D),t(w,$),t(w,P);for(let a=0;a<c.length;a+=1)c[a]&&c[a].m(P,null);ee||(se=[q(o,"input",r[7]),q(T,"click",r[8]),q(E,"input",r[9]),q(k,"click",r[10])],ee=!0)},p(l,[s]){if(s&8&&ge(I,l[3]),s&2&&M(o,l[1]),s&4&&M(E,l[2]),s&32){j=ie(l[5]);let a;for(a=0;a<j.length;a+=1){const B=ce(l,j,a);c[a]?c[a].p(B,s):(c[a]=de(B),c[a].c(),c[a].m(P,null))}for(;a<c.length;a+=1)c[a].d(1);c.length=j.length}},i:ne,o:ne,d(l){l&&v(e),pe(c,l),ee=!1,ue(se)}}}function xe(r,e,i){let u=location.hash==="#1",n=null,h="",S="",g=[];(async()=>{console.log("onload...");const A=await(await fetch("https://maxxafari.metered.live/api/v1/turn/credentials?apiKey=3aea09a742976f93e50ffe3a1c7a287fc050")).json();console.log("iceServers",A),i(0,n=new me({initiator:u,trickle:!1,config:{iceServers:A}})),window.peer=n,n.on("error",o=>console.log("error",o)),n.on("signal",o=>{console.log("SIGNAL",JSON.stringify(o)),i(3,x=JSON.stringify(o))}),n.on("connect",()=>{console.log("CONNECT"),n==null||n.send("whatever"+new Date().toISOString())}),n.on("close",()=>{console.log("CLOSE")}),n.on("error",o=>{console.error("error",o)}),n.on("data",o=>{console.log("GOT data:",o);try{g.push(o.toString())}catch{console.error("could not parse data to string :/",o)}window.data=g})})();function N(){console.log("SUBMIT!: ",JSON.parse(h)),n==null||n.signal(JSON.parse(h))}let x="";function I(){h=this.value,i(1,h)}const R=()=>N();function _(){S=this.value,i(2,S)}return[n,h,S,x,u,g,N,I,R,_,()=>{n==null||n.send(S),i(2,S="")}]}class ke extends _e{constructor(e){super(),ve(this,e,xe,Ee,he,{})}}export{ke as component,be as universal};
