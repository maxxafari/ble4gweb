import{s as ie,n as F,c as se,r as oe,b as ce}from"../chunks/scheduler.aa60952c.js";import{S as ae,i as fe,s as C,g as _,B as re,f as a,c as x,h as m,j as w,a as u,A as T,y as I,m as ne,n as le,k as B,D as K,C as U,F as de}from"../chunks/index.a7391ef6.js";import{e as ue,c as pe,p as ve}from"../chunks/peers.8d3438e1.js";import{w as _e}from"../chunks/index.9adb9ad6.js";function Q(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}const me=!1,he=!0,we=Object.freeze(Object.defineProperty({__proto__:null,prerender:he,ssr:me},Symbol.toStringTag,{value:"Module"})),be=async i=>{console.info("Creating new peer2"),await pe(ve,i)},R=_e(ue,()=>(console.info("new subscription for perStore2"),be(R),()=>{console.info("No subscription  peer2")}));R.subscribe(i=>{i.dataConn&&console.error("not implemented")});function Y(i,n,c){const s=i.slice();return s[10]=n[c],s}function Z(i){let n,c="Waiting for call (NOT initiator)",s,e,l="<h4>Waiting for call from peer1</h4>";return{c(){n=_("p"),n.textContent=c,s=C(),e=_("div"),e.innerHTML=l},l(o){n=m(o,"P",{"data-svelte-h":!0}),I(n)!=="svelte-y1cfax"&&(n.textContent=c),s=x(o),e=m(o,"DIV",{"data-svelte-h":!0}),I(e)!=="svelte-pb42gt"&&(e.innerHTML=l)},m(o,d){u(o,n,d),u(o,s,d),u(o,e,d)},d(o){o&&(a(n),a(s),a(e))}}}function $(i){let n,c="<h4>Connected to peer1</h4>",s,e,l,o,d,S="Send",j,b,H="00",D,p,M="11",y,k,O,X="data",W,P,A,N,g,E,q,G,V=Q(i[3]),v=[];for(let t=0;t<V.length;t+=1)v[t]=ee(Y(i,V,t));let h=!i[1].mediaStream&&te();return{c(){n=_("div"),n.innerHTML=c,s=C(),e=_("div"),l=_("textarea"),o=C(),d=_("button"),d.textContent=S,j=C(),b=_("button"),b.textContent=H,D=C(),p=_("button"),p.textContent=M,y=C(),k=_("div"),O=_("h3"),O.textContent=X,W=C(),P=_("ul");for(let t=0;t<v.length;t+=1)v[t].c();A=ne(`
		w `),h&&h.c(),N=C(),g=_("div"),E=_("video"),this.h()},l(t){n=m(t,"DIV",{"data-svelte-h":!0}),I(n)!=="svelte-195tsj"&&(n.innerHTML=c),s=x(t),e=m(t,"DIV",{});var f=w(e);l=m(f,"TEXTAREA",{id:!0,class:!0}),w(l).forEach(a),o=x(f),d=m(f,"BUTTON",{"data-svelte-h":!0}),I(d)!=="svelte-16kuoif"&&(d.textContent=S),f.forEach(a),j=x(t),b=m(t,"BUTTON",{"data-svelte-h":!0}),I(b)!=="svelte-ldytjp"&&(b.textContent=H),D=x(t),p=m(t,"BUTTON",{"data-svelte-h":!0}),I(p)!=="svelte-boj5ct"&&(p.textContent=M),y=x(t),k=m(t,"DIV",{});var r=w(k);O=m(r,"H3",{"data-svelte-h":!0}),I(O)!=="svelte-1fkupqc"&&(O.textContent=X),W=x(r),P=m(r,"UL",{});var L=w(P);for(let z=0;z<v.length;z+=1)v[z].l(L);L.forEach(a),r.forEach(a),A=le(t,`
		w `),h&&h.l(t),N=x(t),g=m(t,"DIV",{class:!0});var J=w(g);E=m(J,"VIDEO",{class:!0}),w(E).forEach(a),J.forEach(a),this.h()},h(){B(l,"id","send"),B(l,"class","svelte-12v1rwn"),E.autoplay=!0,E.muted=!0,B(E,"class","svelte-12v1rwn"),B(g,"class","video-container")},m(t,f){u(t,n,f),u(t,s,f),u(t,e,f),T(e,l),K(l,i[2]),T(e,o),T(e,d),u(t,j,f),u(t,b,f),u(t,D,f),u(t,p,f),u(t,y,f),u(t,k,f),T(k,O),T(k,W),T(k,P);for(let r=0;r<v.length;r+=1)v[r]&&v[r].m(P,null);u(t,A,f),h&&h.m(t,f),u(t,N,f),u(t,g,f),T(g,E),i[9](E),q||(G=[U(l,"input",i[5]),U(d,"click",i[6]),U(b,"click",i[7]),U(p,"click",i[8])],q=!0)},p(t,f){if(f&4&&K(l,t[2]),f&8){V=Q(t[3]);let r;for(r=0;r<V.length;r+=1){const L=Y(t,V,r);v[r]?v[r].p(L,f):(v[r]=ee(L),v[r].c(),v[r].m(P,null))}for(;r<v.length;r+=1)v[r].d(1);v.length=V.length}t[1].mediaStream?h&&(h.d(1),h=null):h||(h=te(),h.c(),h.m(N.parentNode,N))},d(t){t&&(a(n),a(s),a(e),a(j),a(b),a(D),a(p),a(y),a(k),a(A),a(N),a(g)),de(v,t),h&&h.d(t),i[9](null),q=!1,oe(G)}}}function ee(i){let n,c=i[10]+"",s;return{c(){n=_("li"),s=ne(c)},l(e){n=m(e,"LI",{});var l=w(n);s=le(l,c),l.forEach(a)},m(e,l){u(e,n,l),T(n,s)},p:F,d(e){e&&a(n)}}}function te(i){let n,c="No video streamed";return{c(){n=_("p"),n.textContent=c},l(s){n=m(s,"P",{"data-svelte-h":!0}),I(n)!=="svelte-1p0v38x"&&(n.textContent=c)},m(s,e){u(s,n,e)},d(s){s&&a(n)}}}function Ce(i){let n,c,s,e=!i[1].connected&&Z(),l=i[1].connected&&$(i);return{c(){n=C(),c=_("div"),e&&e.c(),s=C(),l&&l.c(),this.h()},l(o){re("svelte-1y0w2j6",document.head).forEach(a),n=x(o),c=m(o,"DIV",{});var S=w(c);e&&e.l(S),s=x(S),l&&l.l(S),S.forEach(a),this.h()},h(){document.title="Peer2"},m(o,d){u(o,n,d),u(o,c,d),e&&e.m(c,null),T(c,s),l&&l.m(c,null)},p(o,[d]){o[1].connected?e&&(e.d(1),e=null):e||(e=Z(),e.c(),e.m(c,s)),o[1].connected?l?l.p(o,d):(l=$(o),l.c(),l.m(c,null)):l&&(l.d(1),l=null)},i:F,o:F,d(o){o&&(a(n),a(c)),e&&e.d(),l&&l.d()}}}function xe(i,n,c){let s;se(i,R,p=>c(1,s=p));let e="",l=[],o;function d(p,M){var y;(y=s.dataConn)==null||y.send({serviceName:p,value:M})}function S(){e=this.value,c(2,e)}const j=()=>{var p;(p=s.dataConn)==null||p.send(e),c(2,e="")},b=()=>d("leds","00"),H=()=>d("leds","11");function D(p){ce[p?"unshift":"push"](()=>{o=p,c(0,o),c(1,s)})}return i.$$.update=()=>{i.$$.dirty&3&&s.mediaStream&&o&&c(0,o.srcObject=s.mediaStream,o)},[o,s,e,l,d,S,j,b,H,D]}class Ie extends ae{constructor(n){super(),fe(this,n,xe,Ce,ie,{})}}export{Ie as component,we as universal};
