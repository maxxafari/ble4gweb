import{s as oe,n as z,r as se}from"../chunks/scheduler.b0c1c2c3.js";import{S as re,i as ie,g as d,m as R,s as C,h as u,j as x,n as B,f as v,c as S,y as J,k as Y,a as ae,A as t,D as Z,C as ee,o as ce,E as fe}from"../chunks/index.00179a67.js";import{e as te,P as he}from"../chunks/simplepeer.min.88c063de.js";const _e=!1,de=!0,Ce=Object.freeze(Object.defineProperty({__proto__:null,prerender:de,ssr:_e},Symbol.toStringTag,{value:"Module"}));function le(r,e,i){const h=r.slice();return h[9]=e[i],h}function ne(r){let e,i=r[9]+"",h;return{c(){e=d("li"),h=R(i)},l(l){e=u(l,"LI",{});var c=x(e);h=B(c,i),c.forEach(v)},m(l,c){ae(l,e,c),t(e,h)},p:z,d(l){l&&v(e)}}}function ue(r){let e,i,h,l=r[2]?"true":"false",c,D,p,N="My signal",T,E,I,j,f,_,K="Signal with data",H,g,L,M,U,y,W="Signal",V,O,b,X="data",q,k,G,F,w=te(r[4]),o=[];for(let a=0;a<w.length;a+=1)o[a]=ne(le(r,w,a));return{c(){e=d("div"),i=d("p"),h=R("initiator: "),c=R(l),D=C(),p=d("h4"),p.textContent=N,T=C(),E=d("pre"),I=R(r[1]),j=C(),f=d("div"),_=d("h4"),_.textContent=K,H=C(),g=d("textarea"),L=C(),M=d("br"),U=C(),y=d("button"),y.textContent=W,V=C(),O=d("div"),b=d("h3"),b.textContent=X,q=C(),k=d("ul");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){e=u(a,"DIV",{});var s=x(e);i=u(s,"P",{});var n=x(i);h=B(n,"initiator: "),c=B(n,l),n.forEach(v),D=S(s),p=u(s,"H4",{"data-svelte-h":!0}),J(p)!=="svelte-lmdtpo"&&(p.textContent=N),T=S(s),E=u(s,"PRE",{});var P=x(E);I=B(P,r[1]),P.forEach(v),j=S(s),f=u(s,"DIV",{});var m=x(f);_=u(m,"H4",{"data-svelte-h":!0}),J(_)!=="svelte-1nuvgxm"&&(_.textContent=K),H=S(m),g=u(m,"TEXTAREA",{id:!0,class:!0}),x(g).forEach(v),L=S(m),M=u(m,"BR",{}),U=S(m),y=u(m,"BUTTON",{"data-svelte-h":!0}),J(y)!=="svelte-8ver9e"&&(y.textContent=W),m.forEach(v),V=S(s),O=u(s,"DIV",{});var A=x(O);b=u(A,"H3",{"data-svelte-h":!0}),J(b)!=="svelte-1fkupqc"&&(b.textContent=X),q=S(A),k=u(A,"UL",{});var Q=x(k);for(let $=0;$<o.length;$+=1)o[$].l(Q);Q.forEach(v),A.forEach(v),s.forEach(v),this.h()},h(){Y(g,"id","incoming"),Y(g,"class","svelte-17de7ug")},m(a,s){ae(a,e,s),t(e,i),t(i,h),t(i,c),t(e,D),t(e,p),t(e,T),t(e,E),t(E,I),t(e,j),t(e,f),t(f,_),t(f,H),t(f,g),Z(g,r[0]),t(f,L),t(f,M),t(f,U),t(f,y),t(e,V),t(e,O),t(O,b),t(O,q),t(O,k);for(let n=0;n<o.length;n+=1)o[n]&&o[n].m(k,null);G||(F=[ee(g,"input",r[5]),ee(y,"click",r[6])],G=!0)},p(a,[s]){if(s&2&&ce(I,a[1]),s&1&&Z(g,a[0]),s&16){w=te(a[4]);let n;for(n=0;n<w.length;n+=1){const P=le(a,w,n);o[n]?o[n].p(P,s):(o[n]=ne(P),o[n].c(),o[n].m(k,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=w.length}},i:z,o:z,d(a){a&&v(e),fe(o,a),G=!1,se(F)}}}function ve(r,e,i){let h=location.hash==="#1",l=null,c="";(async()=>{console.log("onload...");const f=await(await fetch("https://maxxafari.metered.live/api/v1/turn/credentials?apiKey=3aea09a742976f93e50ffe3a1c7a287fc050")).json();console.log("iceServers",f),l=new he({initiator:h,trickle:!1,config:{iceServers:f}}),window.peer=l,l.on("error",_=>console.log("error",_)),l.on("signal",_=>{console.log("SIGNAL",JSON.stringify(_)),i(1,N=JSON.stringify(_))}),l.on("connect",()=>{console.log("CONNECT"),l==null||l.send("whatever"+new Date().toISOString())}),l.on("data",_=>{console.log("GOT data:",_)})})();function p(){console.log("SUBMIT!: ",JSON.parse(c)),l==null||l.signal(JSON.parse(c))}let N="",T=[];function E(){c=this.value,i(0,c)}return[c,N,h,p,T,E,()=>p()]}class Se extends re{constructor(e){super(),ie(this,e,ve,ue,oe,{})}}export{Se as component,Ce as universal};
